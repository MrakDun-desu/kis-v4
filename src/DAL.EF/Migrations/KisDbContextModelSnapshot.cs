// <auto-generated />
using System;
using KisV4.DAL.EF;
using Microsoft.EntityFrameworkCore;
using Microsoft.EntityFrameworkCore.Infrastructure;
using Microsoft.EntityFrameworkCore.Storage.ValueConversion;
using Npgsql.EntityFrameworkCore.PostgreSQL.Metadata;

#nullable disable

namespace KisV4.DAL.EF.Migrations
{
    [DbContext(typeof(KisDbContext))]
    partial class KisDbContextModelSnapshot : ModelSnapshot
    {
        protected override void BuildModel(ModelBuilder modelBuilder)
        {
#pragma warning disable 612, 618
            modelBuilder
                .HasAnnotation("ProductVersion", "10.0.2")
                .HasAnnotation("Relational:MaxIdentifierLength", 63);

            NpgsqlModelBuilderExtensions.UseIdentityByDefaultColumns(modelBuilder);

            modelBuilder.Entity("ApplicableModifiers", b =>
                {
                    b.Property<int>("ApplicableModifiersId")
                        .HasColumnType("integer");

                    b.Property<int>("TargetsId")
                        .HasColumnType("integer");

                    b.HasKey("ApplicableModifiersId", "TargetsId");

                    b.HasIndex("TargetsId");

                    b.ToTable("ApplicableModifiers");
                });

            modelBuilder.Entity("CompositeInCategory", b =>
                {
                    b.Property<int>("CategoriesId")
                        .HasColumnType("integer");

                    b.Property<int>("CompositesId")
                        .HasColumnType("integer");

                    b.HasKey("CategoriesId", "CompositesId");

                    b.HasIndex("CompositesId");

                    b.ToTable("CompositeInCategory");
                });

            modelBuilder.Entity("KisV4.DAL.EF.Entities.Account", b =>
                {
                    b.Property<int>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("integer");

                    NpgsqlPropertyBuilderExtensions.UseIdentityByDefaultColumn(b.Property<int>("Id"));

                    b.HasKey("Id");

                    b.ToTable("Accounts");
                });

            modelBuilder.Entity("KisV4.DAL.EF.Entities.AccountTransaction", b =>
                {
                    b.Property<int>("AccountId")
                        .HasColumnType("integer");

                    b.Property<int>("SaleTransactionId")
                        .HasColumnType("integer");

                    b.Property<decimal>("Amount")
                        .HasPrecision(11, 2)
                        .HasColumnType("numeric(11,2)");

                    b.Property<bool>("Cancelled")
                        .HasColumnType("boolean");

                    b.Property<DateTimeOffset>("Timestamp")
                        .HasPrecision(0)
                        .HasColumnType("timestamp(0) with time zone");

                    b.HasKey("AccountId", "SaleTransactionId");

                    b.HasIndex("SaleTransactionId");

                    b.ToTable("AccountTransactions");
                });

            modelBuilder.Entity("KisV4.DAL.EF.Entities.Cashbox", b =>
                {
                    b.Property<int>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("integer");

                    NpgsqlPropertyBuilderExtensions.UseIdentityByDefaultColumn(b.Property<int>("Id"));

                    b.Property<bool>("Deleted")
                        .HasColumnType("boolean");

                    b.Property<int>("DonationsAccountId")
                        .HasColumnType("integer");

                    b.Property<string>("Name")
                        .IsRequired()
                        .HasColumnType("text");

                    b.Property<int>("SalesAccountId")
                        .HasColumnType("integer");

                    b.HasKey("Id");

                    b.HasIndex("DonationsAccountId");

                    b.HasIndex("SalesAccountId");

                    b.ToTable("Cashboxes");
                });

            modelBuilder.Entity("KisV4.DAL.EF.Entities.Category", b =>
                {
                    b.Property<int>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("integer");

                    NpgsqlPropertyBuilderExtensions.UseIdentityByDefaultColumn(b.Property<int>("Id"));

                    b.Property<string>("Name")
                        .IsRequired()
                        .HasColumnType("text");

                    b.HasKey("Id");

                    b.ToTable("Categories");
                });

            modelBuilder.Entity("KisV4.DAL.EF.Entities.Composite", b =>
                {
                    b.Property<int>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("integer");

                    NpgsqlPropertyBuilderExtensions.UseIdentityByDefaultColumn(b.Property<int>("Id"));

                    b.Property<string>("Discriminator")
                        .IsRequired()
                        .HasMaxLength(13)
                        .HasColumnType("character varying(13)");

                    b.Property<bool>("Hidden")
                        .HasColumnType("boolean");

                    b.Property<string>("Image")
                        .HasColumnType("text");

                    b.Property<decimal>("MarginPercent")
                        .HasPrecision(11, 2)
                        .HasColumnType("numeric(11,2)");

                    b.Property<decimal>("MarginStatic")
                        .HasPrecision(11, 2)
                        .HasColumnType("numeric(11,2)");

                    b.Property<string>("Name")
                        .IsRequired()
                        .HasColumnType("text");

                    b.Property<decimal>("PrestigeAmount")
                        .HasPrecision(11, 2)
                        .HasColumnType("numeric(11,2)");

                    b.HasKey("Id");

                    b.ToTable("Composites");

                    b.HasDiscriminator<string>("Discriminator").HasValue("Composite");

                    b.UseTphMappingStrategy();
                });

            modelBuilder.Entity("KisV4.DAL.EF.Entities.CompositeAmount", b =>
                {
                    b.Property<int>("StoreId")
                        .HasColumnType("integer");

                    b.Property<int>("CompositeId")
                        .HasColumnType("integer");

                    b.Property<decimal>("Amount")
                        .HasPrecision(11, 2)
                        .HasColumnType("numeric(11,2)");

                    b.HasKey("StoreId", "CompositeId");

                    b.HasIndex("CompositeId");

                    b.ToTable("CompositeAmounts");
                });

            modelBuilder.Entity("KisV4.DAL.EF.Entities.Composition", b =>
                {
                    b.Property<int>("StoreItemId")
                        .HasColumnType("integer");

                    b.Property<int>("CompositeId")
                        .HasColumnType("integer");

                    b.Property<decimal>("Amount")
                        .HasPrecision(11, 2)
                        .HasColumnType("numeric(11,2)");

                    b.HasKey("StoreItemId", "CompositeId");

                    b.HasIndex("CompositeId");

                    b.ToTable("Compositions");
                });

            modelBuilder.Entity("KisV4.DAL.EF.Entities.Container", b =>
                {
                    b.Property<int>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("integer");

                    NpgsqlPropertyBuilderExtensions.UseIdentityByDefaultColumn(b.Property<int>("Id"));

                    b.Property<decimal>("Amount")
                        .HasPrecision(11, 2)
                        .HasColumnType("numeric(11,2)");

                    b.Property<int?>("PipeId")
                        .HasColumnType("integer");

                    b.Property<int>("State")
                        .HasColumnType("integer");

                    b.Property<int>("StoreId")
                        .HasColumnType("integer");

                    b.Property<int>("TemplateId")
                        .HasColumnType("integer");

                    b.HasKey("Id");

                    b.HasIndex("PipeId");

                    b.HasIndex("StoreId");

                    b.HasIndex("TemplateId");

                    b.ToTable("Containers");
                });

            modelBuilder.Entity("KisV4.DAL.EF.Entities.ContainerChange", b =>
                {
                    b.Property<int>("ContainerId")
                        .HasColumnType("integer");

                    b.Property<DateTimeOffset>("Timestamp")
                        .HasPrecision(0)
                        .HasColumnType("timestamp(0) with time zone");

                    b.Property<decimal>("NewAmount")
                        .HasPrecision(11, 2)
                        .HasColumnType("numeric(11,2)");

                    b.Property<int>("NewState")
                        .HasColumnType("integer");

                    b.Property<int>("UserId")
                        .HasColumnType("integer");

                    b.HasKey("ContainerId", "Timestamp");

                    b.HasIndex("UserId");

                    b.ToTable("ContainerChanges");
                });

            modelBuilder.Entity("KisV4.DAL.EF.Entities.ContainerTemplate", b =>
                {
                    b.Property<int>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("integer");

                    NpgsqlPropertyBuilderExtensions.UseIdentityByDefaultColumn(b.Property<int>("Id"));

                    b.Property<decimal>("Amount")
                        .HasPrecision(11, 2)
                        .HasColumnType("numeric(11,2)");

                    b.Property<bool>("Deleted")
                        .HasColumnType("boolean");

                    b.Property<string>("Name")
                        .IsRequired()
                        .HasColumnType("text");

                    b.Property<int>("StoreItemId")
                        .HasColumnType("integer");

                    b.HasKey("Id");

                    b.HasIndex("StoreItemId");

                    b.ToTable("ContainerTemplates");
                });

            modelBuilder.Entity("KisV4.DAL.EF.Entities.Cost", b =>
                {
                    b.Property<int>("StoreItemId")
                        .HasColumnType("integer");

                    b.Property<DateTimeOffset>("Timestamp")
                        .HasPrecision(0)
                        .HasColumnType("timestamp(0) with time zone");

                    b.Property<decimal>("Amount")
                        .HasPrecision(11, 2)
                        .HasColumnType("numeric(11,2)");

                    b.Property<string>("Description")
                        .IsRequired()
                        .HasColumnType("text");

                    b.Property<int>("UserId")
                        .HasColumnType("integer");

                    b.HasKey("StoreItemId", "Timestamp");

                    b.HasIndex("UserId");

                    b.ToTable("Costs");
                });

            modelBuilder.Entity("KisV4.DAL.EF.Entities.Discount", b =>
                {
                    b.Property<int>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("integer");

                    NpgsqlPropertyBuilderExtensions.UseIdentityByDefaultColumn(b.Property<int>("Id"));

                    b.Property<bool>("Deleted")
                        .HasColumnType("boolean");

                    b.Property<string>("Name")
                        .IsRequired()
                        .HasColumnType("text");

                    b.HasKey("Id");

                    b.ToTable("Discounts");
                });

            modelBuilder.Entity("KisV4.DAL.EF.Entities.DiscountUsage", b =>
                {
                    b.Property<int>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("integer");

                    NpgsqlPropertyBuilderExtensions.UseIdentityByDefaultColumn(b.Property<int>("Id"));

                    b.Property<int>("DiscountId")
                        .HasColumnType("integer");

                    b.Property<DateTimeOffset>("Timestamp")
                        .HasPrecision(0)
                        .HasColumnType("timestamp(0) with time zone");

                    b.Property<int>("UserId")
                        .HasColumnType("integer");

                    b.HasKey("Id");

                    b.HasIndex("DiscountId");

                    b.HasIndex("UserId");

                    b.ToTable("DiscountUsages");
                });

            modelBuilder.Entity("KisV4.DAL.EF.Entities.Layout", b =>
                {
                    b.Property<int>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("integer");

                    NpgsqlPropertyBuilderExtensions.UseIdentityByDefaultColumn(b.Property<int>("Id"));

                    b.Property<string>("Image")
                        .HasColumnType("text");

                    b.Property<string>("Name")
                        .IsRequired()
                        .HasColumnType("text");

                    b.Property<bool>("TopLevel")
                        .HasColumnType("boolean");

                    b.HasKey("Id");

                    b.ToTable("Layouts");
                });

            modelBuilder.Entity("KisV4.DAL.EF.Entities.LayoutItem", b =>
                {
                    b.Property<int>("LayoutId")
                        .HasColumnType("integer");

                    b.Property<int>("X")
                        .HasColumnType("integer");

                    b.Property<int>("Y")
                        .HasColumnType("integer");

                    b.Property<string>("Type")
                        .IsRequired()
                        .HasMaxLength(13)
                        .HasColumnType("character varying(13)");

                    b.HasKey("LayoutId", "X", "Y");

                    b.ToTable("LayoutItems");

                    b.HasDiscriminator<string>("Type").HasValue("LayoutItem");

                    b.UseTphMappingStrategy();
                });

            modelBuilder.Entity("KisV4.DAL.EF.Entities.Modification", b =>
                {
                    b.Property<int>("ModifierId")
                        .HasColumnType("integer");

                    b.Property<int>("SaleTransactionItemId")
                        .HasColumnType("integer");

                    b.Property<int>("Amount")
                        .HasColumnType("integer");

                    b.HasKey("ModifierId", "SaleTransactionItemId");

                    b.HasIndex("SaleTransactionItemId");

                    b.ToTable("Modifications");
                });

            modelBuilder.Entity("KisV4.DAL.EF.Entities.Pipe", b =>
                {
                    b.Property<int>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("integer");

                    NpgsqlPropertyBuilderExtensions.UseIdentityByDefaultColumn(b.Property<int>("Id"));

                    b.Property<string>("Name")
                        .IsRequired()
                        .HasColumnType("text");

                    b.HasKey("Id");

                    b.ToTable("Pipes");
                });

            modelBuilder.Entity("KisV4.DAL.EF.Entities.PriceChange", b =>
                {
                    b.Property<int>("DiscountUsageId")
                        .HasColumnType("integer");

                    b.Property<int>("SaleTransactionItemId")
                        .HasColumnType("integer");

                    b.Property<decimal>("Amount")
                        .HasPrecision(11, 2)
                        .HasColumnType("numeric(11,2)");

                    b.HasKey("DiscountUsageId", "SaleTransactionItemId");

                    b.HasIndex("SaleTransactionItemId");

                    b.ToTable("PriceChanges");
                });

            modelBuilder.Entity("KisV4.DAL.EF.Entities.SaleTransactionItem", b =>
                {
                    b.Property<int>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("integer");

                    NpgsqlPropertyBuilderExtensions.UseIdentityByDefaultColumn(b.Property<int>("Id"));

                    b.Property<bool>("Cancelled")
                        .HasColumnType("boolean");

                    b.Property<int>("ItemAmount")
                        .HasColumnType("integer");

                    b.Property<int>("SaleItemId")
                        .HasColumnType("integer");

                    b.Property<int>("SaleTransactionId")
                        .HasColumnType("integer");

                    b.HasKey("Id");

                    b.HasIndex("SaleItemId");

                    b.HasIndex("SaleTransactionId");

                    b.ToTable("SaleTransactionItems");
                });

            modelBuilder.Entity("KisV4.DAL.EF.Entities.Store", b =>
                {
                    b.Property<int>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("integer");

                    NpgsqlPropertyBuilderExtensions.UseIdentityByDefaultColumn(b.Property<int>("Id"));

                    b.Property<bool>("Deleted")
                        .HasColumnType("boolean");

                    b.Property<string>("Name")
                        .IsRequired()
                        .HasColumnType("text");

                    b.HasKey("Id");

                    b.ToTable("Stores");
                });

            modelBuilder.Entity("KisV4.DAL.EF.Entities.StoreItem", b =>
                {
                    b.Property<int>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("integer");

                    NpgsqlPropertyBuilderExtensions.UseIdentityByDefaultColumn(b.Property<int>("Id"));

                    b.Property<decimal>("CurrentCost")
                        .HasPrecision(11, 2)
                        .HasColumnType("numeric(11,2)");

                    b.Property<bool>("Hidden")
                        .HasColumnType("boolean");

                    b.Property<bool>("IsContainerItem")
                        .HasColumnType("boolean");

                    b.Property<string>("Name")
                        .IsRequired()
                        .HasColumnType("text");

                    b.Property<string>("UnitName")
                        .IsRequired()
                        .HasColumnType("text");

                    b.HasKey("Id");

                    b.ToTable("StoreItems");
                });

            modelBuilder.Entity("KisV4.DAL.EF.Entities.StoreItemAmount", b =>
                {
                    b.Property<int>("StoreId")
                        .HasColumnType("integer");

                    b.Property<int>("StoreItemId")
                        .HasColumnType("integer");

                    b.Property<decimal>("Amount")
                        .HasPrecision(11, 2)
                        .HasColumnType("numeric(11,2)");

                    b.HasKey("StoreId", "StoreItemId");

                    b.HasIndex("StoreItemId");

                    b.ToTable("StoreItemAmounts");
                });

            modelBuilder.Entity("KisV4.DAL.EF.Entities.StoreTransactionItem", b =>
                {
                    b.Property<int>("StoreItemId")
                        .HasColumnType("integer");

                    b.Property<int>("StoreId")
                        .HasColumnType("integer");

                    b.Property<int>("StoreTransactionId")
                        .HasColumnType("integer");

                    b.Property<bool>("Cancelled")
                        .HasColumnType("boolean");

                    b.Property<decimal>("Cost")
                        .HasPrecision(11, 2)
                        .HasColumnType("numeric(11,2)");

                    b.Property<decimal>("ItemAmount")
                        .HasPrecision(11, 2)
                        .HasColumnType("numeric(11,2)");

                    b.HasKey("StoreItemId", "StoreId", "StoreTransactionId");

                    b.HasIndex("StoreId");

                    b.HasIndex("StoreTransactionId");

                    b.ToTable("StoreTransactionItems");
                });

            modelBuilder.Entity("KisV4.DAL.EF.Entities.Transaction", b =>
                {
                    b.Property<int>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("integer");

                    NpgsqlPropertyBuilderExtensions.UseIdentityByDefaultColumn(b.Property<int>("Id"));

                    b.Property<DateTimeOffset?>("CancelledAt")
                        .HasPrecision(0)
                        .HasColumnType("timestamp(0) with time zone");

                    b.Property<int?>("CancelledById")
                        .HasColumnType("integer");

                    b.Property<string>("Discriminator")
                        .IsRequired()
                        .HasMaxLength(21)
                        .HasColumnType("character varying(21)");

                    b.Property<string>("Note")
                        .HasColumnType("text");

                    b.Property<int>("Reason")
                        .HasColumnType("integer");

                    b.Property<DateTimeOffset>("StartedAt")
                        .HasPrecision(0)
                        .HasColumnType("timestamp(0) with time zone");

                    b.Property<int>("StartedById")
                        .HasColumnType("integer");

                    b.HasKey("Id");

                    b.HasIndex("CancelledById");

                    b.HasIndex("StartedById");

                    b.ToTable("Transactions");

                    b.HasDiscriminator<string>("Discriminator").HasValue("Transaction");

                    b.UseTphMappingStrategy();
                });

            modelBuilder.Entity("KisV4.DAL.EF.Entities.User", b =>
                {
                    b.Property<int>("Id")
                        .HasColumnType("integer");

                    b.Property<int>("PrestigeAccountId")
                        .HasColumnType("integer");

                    b.HasKey("Id");

                    b.HasIndex("PrestigeAccountId");

                    b.ToTable("Users");
                });

            modelBuilder.Entity("StoreItemInCategory", b =>
                {
                    b.Property<int>("CategoriesId")
                        .HasColumnType("integer");

                    b.Property<int>("StoreItemsId")
                        .HasColumnType("integer");

                    b.HasKey("CategoriesId", "StoreItemsId");

                    b.HasIndex("StoreItemsId");

                    b.ToTable("StoreItemInCategory");
                });

            modelBuilder.Entity("KisV4.DAL.EF.Entities.Modifier", b =>
                {
                    b.HasBaseType("KisV4.DAL.EF.Entities.Composite");

                    b.HasDiscriminator().HasValue("Modifier");
                });

            modelBuilder.Entity("KisV4.DAL.EF.Entities.SaleItem", b =>
                {
                    b.HasBaseType("KisV4.DAL.EF.Entities.Composite");

                    b.Property<int>("PrintType")
                        .HasColumnType("integer");

                    b.HasDiscriminator().HasValue("SaleItem");
                });

            modelBuilder.Entity("KisV4.DAL.EF.Entities.LayoutLink", b =>
                {
                    b.HasBaseType("KisV4.DAL.EF.Entities.LayoutItem");

                    b.Property<int>("TargetId")
                        .HasColumnType("integer");

                    b.HasIndex("TargetId");

                    b.HasDiscriminator().HasValue("Layout");
                });

            modelBuilder.Entity("KisV4.DAL.EF.Entities.LayoutPipe", b =>
                {
                    b.HasBaseType("KisV4.DAL.EF.Entities.LayoutItem");

                    b.Property<int>("TargetId")
                        .HasColumnType("integer");

                    b.HasIndex("TargetId");

                    b.ToTable("LayoutItems", t =>
                        {
                            t.Property("TargetId")
                                .HasColumnName("LayoutPipe_TargetId");
                        });

                    b.HasDiscriminator().HasValue("Pipe");
                });

            modelBuilder.Entity("KisV4.DAL.EF.Entities.LayoutSaleItem", b =>
                {
                    b.HasBaseType("KisV4.DAL.EF.Entities.LayoutItem");

                    b.Property<int>("TargetId")
                        .HasColumnType("integer");

                    b.HasIndex("TargetId");

                    b.ToTable("LayoutItems", t =>
                        {
                            t.Property("TargetId")
                                .HasColumnName("LayoutSaleItem_TargetId");
                        });

                    b.HasDiscriminator().HasValue("SaleItem");
                });

            modelBuilder.Entity("KisV4.DAL.EF.Entities.SaleTransaction", b =>
                {
                    b.HasBaseType("KisV4.DAL.EF.Entities.Transaction");

                    b.Property<DateTimeOffset?>("ClosedAt")
                        .HasPrecision(0)
                        .HasColumnType("timestamp(0) with time zone");

                    b.Property<int?>("OpenedById")
                        .HasColumnType("integer");

                    b.HasIndex("OpenedById");

                    b.HasDiscriminator().HasValue("SaleTransaction");
                });

            modelBuilder.Entity("KisV4.DAL.EF.Entities.StoreTransaction", b =>
                {
                    b.HasBaseType("KisV4.DAL.EF.Entities.Transaction");

                    b.Property<int?>("SaleTransactionId")
                        .HasColumnType("integer");

                    b.HasIndex("SaleTransactionId");

                    b.HasDiscriminator().HasValue("StoreTransaction");
                });

            modelBuilder.Entity("ApplicableModifiers", b =>
                {
                    b.HasOne("KisV4.DAL.EF.Entities.Modifier", null)
                        .WithMany()
                        .HasForeignKey("ApplicableModifiersId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.HasOne("KisV4.DAL.EF.Entities.SaleItem", null)
                        .WithMany()
                        .HasForeignKey("TargetsId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();
                });

            modelBuilder.Entity("CompositeInCategory", b =>
                {
                    b.HasOne("KisV4.DAL.EF.Entities.Category", null)
                        .WithMany()
                        .HasForeignKey("CategoriesId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.HasOne("KisV4.DAL.EF.Entities.Composite", null)
                        .WithMany()
                        .HasForeignKey("CompositesId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();
                });

            modelBuilder.Entity("KisV4.DAL.EF.Entities.AccountTransaction", b =>
                {
                    b.HasOne("KisV4.DAL.EF.Entities.Account", "Account")
                        .WithMany("AccountTransactions")
                        .HasForeignKey("AccountId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.HasOne("KisV4.DAL.EF.Entities.SaleTransaction", "SaleTransaction")
                        .WithMany("AccountTransactions")
                        .HasForeignKey("SaleTransactionId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.Navigation("Account");

                    b.Navigation("SaleTransaction");
                });

            modelBuilder.Entity("KisV4.DAL.EF.Entities.Cashbox", b =>
                {
                    b.HasOne("KisV4.DAL.EF.Entities.Account", "DonationsAccount")
                        .WithMany()
                        .HasForeignKey("DonationsAccountId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.HasOne("KisV4.DAL.EF.Entities.Account", "SalesAccount")
                        .WithMany()
                        .HasForeignKey("SalesAccountId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.Navigation("DonationsAccount");

                    b.Navigation("SalesAccount");
                });

            modelBuilder.Entity("KisV4.DAL.EF.Entities.CompositeAmount", b =>
                {
                    b.HasOne("KisV4.DAL.EF.Entities.Composite", "Composite")
                        .WithMany()
                        .HasForeignKey("CompositeId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.HasOne("KisV4.DAL.EF.Entities.Store", "Store")
                        .WithMany()
                        .HasForeignKey("StoreId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.Navigation("Composite");

                    b.Navigation("Store");
                });

            modelBuilder.Entity("KisV4.DAL.EF.Entities.Composition", b =>
                {
                    b.HasOne("KisV4.DAL.EF.Entities.Composite", "Composite")
                        .WithMany("Compositions")
                        .HasForeignKey("CompositeId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.HasOne("KisV4.DAL.EF.Entities.StoreItem", "StoreItem")
                        .WithMany("Compositions")
                        .HasForeignKey("StoreItemId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.Navigation("Composite");

                    b.Navigation("StoreItem");
                });

            modelBuilder.Entity("KisV4.DAL.EF.Entities.Container", b =>
                {
                    b.HasOne("KisV4.DAL.EF.Entities.Pipe", "Pipe")
                        .WithMany("Containers")
                        .HasForeignKey("PipeId");

                    b.HasOne("KisV4.DAL.EF.Entities.Store", "Store")
                        .WithMany("Containers")
                        .HasForeignKey("StoreId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.HasOne("KisV4.DAL.EF.Entities.ContainerTemplate", "Template")
                        .WithMany("Instances")
                        .HasForeignKey("TemplateId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.Navigation("Pipe");

                    b.Navigation("Store");

                    b.Navigation("Template");
                });

            modelBuilder.Entity("KisV4.DAL.EF.Entities.ContainerChange", b =>
                {
                    b.HasOne("KisV4.DAL.EF.Entities.Container", "Container")
                        .WithMany("ContainerChanges")
                        .HasForeignKey("ContainerId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.HasOne("KisV4.DAL.EF.Entities.User", "User")
                        .WithMany("ContainerChanges")
                        .HasForeignKey("UserId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.Navigation("Container");

                    b.Navigation("User");
                });

            modelBuilder.Entity("KisV4.DAL.EF.Entities.ContainerTemplate", b =>
                {
                    b.HasOne("KisV4.DAL.EF.Entities.StoreItem", "StoreItem")
                        .WithMany()
                        .HasForeignKey("StoreItemId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.Navigation("StoreItem");
                });

            modelBuilder.Entity("KisV4.DAL.EF.Entities.Cost", b =>
                {
                    b.HasOne("KisV4.DAL.EF.Entities.StoreItem", "StoreItem")
                        .WithMany("Costs")
                        .HasForeignKey("StoreItemId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.HasOne("KisV4.DAL.EF.Entities.User", "User")
                        .WithMany("Costs")
                        .HasForeignKey("UserId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.Navigation("StoreItem");

                    b.Navigation("User");
                });

            modelBuilder.Entity("KisV4.DAL.EF.Entities.DiscountUsage", b =>
                {
                    b.HasOne("KisV4.DAL.EF.Entities.Discount", "Discount")
                        .WithMany("DiscountUsages")
                        .HasForeignKey("DiscountId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.HasOne("KisV4.DAL.EF.Entities.User", "User")
                        .WithMany("DiscountUsages")
                        .HasForeignKey("UserId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.Navigation("Discount");

                    b.Navigation("User");
                });

            modelBuilder.Entity("KisV4.DAL.EF.Entities.LayoutItem", b =>
                {
                    b.HasOne("KisV4.DAL.EF.Entities.Layout", "Layout")
                        .WithMany("LayoutItems")
                        .HasForeignKey("LayoutId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.Navigation("Layout");
                });

            modelBuilder.Entity("KisV4.DAL.EF.Entities.Modification", b =>
                {
                    b.HasOne("KisV4.DAL.EF.Entities.Modifier", "Modifier")
                        .WithMany("Modifications")
                        .HasForeignKey("ModifierId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.HasOne("KisV4.DAL.EF.Entities.SaleTransactionItem", "SaleTransactionItem")
                        .WithMany("Modifications")
                        .HasForeignKey("SaleTransactionItemId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.Navigation("Modifier");

                    b.Navigation("SaleTransactionItem");
                });

            modelBuilder.Entity("KisV4.DAL.EF.Entities.PriceChange", b =>
                {
                    b.HasOne("KisV4.DAL.EF.Entities.DiscountUsage", "DiscountUsage")
                        .WithMany("PriceChanges")
                        .HasForeignKey("DiscountUsageId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.HasOne("KisV4.DAL.EF.Entities.SaleTransactionItem", "SaleTransactionItem")
                        .WithMany("PriceChanges")
                        .HasForeignKey("SaleTransactionItemId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.Navigation("DiscountUsage");

                    b.Navigation("SaleTransactionItem");
                });

            modelBuilder.Entity("KisV4.DAL.EF.Entities.SaleTransactionItem", b =>
                {
                    b.HasOne("KisV4.DAL.EF.Entities.SaleItem", "SaleItem")
                        .WithMany("SaleTransactionItems")
                        .HasForeignKey("SaleItemId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.HasOne("KisV4.DAL.EF.Entities.SaleTransaction", "SaleTransaction")
                        .WithMany("SaleTransactionItems")
                        .HasForeignKey("SaleTransactionId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.Navigation("SaleItem");

                    b.Navigation("SaleTransaction");
                });

            modelBuilder.Entity("KisV4.DAL.EF.Entities.StoreItemAmount", b =>
                {
                    b.HasOne("KisV4.DAL.EF.Entities.Store", "Store")
                        .WithMany()
                        .HasForeignKey("StoreId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.HasOne("KisV4.DAL.EF.Entities.StoreItem", "StoreItem")
                        .WithMany()
                        .HasForeignKey("StoreItemId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.Navigation("Store");

                    b.Navigation("StoreItem");
                });

            modelBuilder.Entity("KisV4.DAL.EF.Entities.StoreTransactionItem", b =>
                {
                    b.HasOne("KisV4.DAL.EF.Entities.Store", "Store")
                        .WithMany("StoreTransactionItems")
                        .HasForeignKey("StoreId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.HasOne("KisV4.DAL.EF.Entities.StoreItem", "StoreItem")
                        .WithMany()
                        .HasForeignKey("StoreItemId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.HasOne("KisV4.DAL.EF.Entities.StoreTransaction", "StoreTransaction")
                        .WithMany("StoreTransactionItems")
                        .HasForeignKey("StoreTransactionId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.Navigation("Store");

                    b.Navigation("StoreItem");

                    b.Navigation("StoreTransaction");
                });

            modelBuilder.Entity("KisV4.DAL.EF.Entities.Transaction", b =>
                {
                    b.HasOne("KisV4.DAL.EF.Entities.User", "CancelledBy")
                        .WithMany("CancelledTransactions")
                        .HasForeignKey("CancelledById");

                    b.HasOne("KisV4.DAL.EF.Entities.User", "StartedBy")
                        .WithMany("StartedTransactions")
                        .HasForeignKey("StartedById")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.Navigation("CancelledBy");

                    b.Navigation("StartedBy");
                });

            modelBuilder.Entity("KisV4.DAL.EF.Entities.User", b =>
                {
                    b.HasOne("KisV4.DAL.EF.Entities.Account", "PrestigeAccount")
                        .WithMany()
                        .HasForeignKey("PrestigeAccountId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.Navigation("PrestigeAccount");
                });

            modelBuilder.Entity("StoreItemInCategory", b =>
                {
                    b.HasOne("KisV4.DAL.EF.Entities.Category", null)
                        .WithMany()
                        .HasForeignKey("CategoriesId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.HasOne("KisV4.DAL.EF.Entities.StoreItem", null)
                        .WithMany()
                        .HasForeignKey("StoreItemsId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();
                });

            modelBuilder.Entity("KisV4.DAL.EF.Entities.LayoutLink", b =>
                {
                    b.HasOne("KisV4.DAL.EF.Entities.Layout", "Target")
                        .WithMany()
                        .HasForeignKey("TargetId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.Navigation("Target");
                });

            modelBuilder.Entity("KisV4.DAL.EF.Entities.LayoutPipe", b =>
                {
                    b.HasOne("KisV4.DAL.EF.Entities.Pipe", "Target")
                        .WithMany()
                        .HasForeignKey("TargetId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.Navigation("Target");
                });

            modelBuilder.Entity("KisV4.DAL.EF.Entities.LayoutSaleItem", b =>
                {
                    b.HasOne("KisV4.DAL.EF.Entities.SaleItem", "Target")
                        .WithMany()
                        .HasForeignKey("TargetId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.Navigation("Target");
                });

            modelBuilder.Entity("KisV4.DAL.EF.Entities.SaleTransaction", b =>
                {
                    b.HasOne("KisV4.DAL.EF.Entities.User", "OpenedBy")
                        .WithMany("OpenTransactions")
                        .HasForeignKey("OpenedById");

                    b.Navigation("OpenedBy");
                });

            modelBuilder.Entity("KisV4.DAL.EF.Entities.StoreTransaction", b =>
                {
                    b.HasOne("KisV4.DAL.EF.Entities.SaleTransaction", "SaleTransaction")
                        .WithMany("StoreTransactions")
                        .HasForeignKey("SaleTransactionId");

                    b.Navigation("SaleTransaction");
                });

            modelBuilder.Entity("KisV4.DAL.EF.Entities.Account", b =>
                {
                    b.Navigation("AccountTransactions");
                });

            modelBuilder.Entity("KisV4.DAL.EF.Entities.Composite", b =>
                {
                    b.Navigation("Compositions");
                });

            modelBuilder.Entity("KisV4.DAL.EF.Entities.Container", b =>
                {
                    b.Navigation("ContainerChanges");
                });

            modelBuilder.Entity("KisV4.DAL.EF.Entities.ContainerTemplate", b =>
                {
                    b.Navigation("Instances");
                });

            modelBuilder.Entity("KisV4.DAL.EF.Entities.Discount", b =>
                {
                    b.Navigation("DiscountUsages");
                });

            modelBuilder.Entity("KisV4.DAL.EF.Entities.DiscountUsage", b =>
                {
                    b.Navigation("PriceChanges");
                });

            modelBuilder.Entity("KisV4.DAL.EF.Entities.Layout", b =>
                {
                    b.Navigation("LayoutItems");
                });

            modelBuilder.Entity("KisV4.DAL.EF.Entities.Pipe", b =>
                {
                    b.Navigation("Containers");
                });

            modelBuilder.Entity("KisV4.DAL.EF.Entities.SaleTransactionItem", b =>
                {
                    b.Navigation("Modifications");

                    b.Navigation("PriceChanges");
                });

            modelBuilder.Entity("KisV4.DAL.EF.Entities.Store", b =>
                {
                    b.Navigation("Containers");

                    b.Navigation("StoreTransactionItems");
                });

            modelBuilder.Entity("KisV4.DAL.EF.Entities.StoreItem", b =>
                {
                    b.Navigation("Compositions");

                    b.Navigation("Costs");
                });

            modelBuilder.Entity("KisV4.DAL.EF.Entities.User", b =>
                {
                    b.Navigation("CancelledTransactions");

                    b.Navigation("ContainerChanges");

                    b.Navigation("Costs");

                    b.Navigation("DiscountUsages");

                    b.Navigation("OpenTransactions");

                    b.Navigation("StartedTransactions");
                });

            modelBuilder.Entity("KisV4.DAL.EF.Entities.Modifier", b =>
                {
                    b.Navigation("Modifications");
                });

            modelBuilder.Entity("KisV4.DAL.EF.Entities.SaleItem", b =>
                {
                    b.Navigation("SaleTransactionItems");
                });

            modelBuilder.Entity("KisV4.DAL.EF.Entities.SaleTransaction", b =>
                {
                    b.Navigation("AccountTransactions");

                    b.Navigation("SaleTransactionItems");

                    b.Navigation("StoreTransactions");
                });

            modelBuilder.Entity("KisV4.DAL.EF.Entities.StoreTransaction", b =>
                {
                    b.Navigation("StoreTransactionItems");
                });
#pragma warning restore 612, 618
        }
    }
}
